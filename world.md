# http2的世界

那么当http2被广泛采用的时候，到底会变得怎么样呢？或者它会被广泛采用吗？

**8.1. http2会如何影响普通人？**

当前http2还没被大范围部署或使用。我们也无法确定到底会发生什么变化。但我们可以通过SPDY的例子和过去到现在的很多实验来评估和计算。

http2减少了网络往返传输的数量，并且用多路复用和快速丢弃不需要的流的办法来完全避免了head of line blocking的困境。

它也支持大量并行流

合理利用流上的优先级，可以让客户端尽可能有限收到更重要的数据。

所有这些加起来，我认为很可能这会带来更快速的页面载入时间和响应更快的站点。简而言之：更好的web体验。

但到底能变得多块，到底提升有多大呢？我认为很难说清楚。首先，这些技术依然在早期，所以我们还没发看见客户端和服务器实现这些并真正受益于新协议所提供的强大功能。

**8.2. http2会如何影响web开发？**

近年来，web开发者和web开发环境聚集了越来越多的工具来临时解决HTTP 1.1的问题，其中一些我已在上文中简单的介绍了。

这些解决方案很多是工具默认提供，在我们使用的时候如果不加思考，那么很可能会损害到http2的性能，或者至少让我们没法真正利用到http2真正的威力。Spriting和内联应该是http2里面最不需要的了。Sharding甚至会伤害到http2。

所以，这里的问题就是：web网站和web开发们需要同时支持HTTP 1.1和http2客户端。

考虑到这些问题，我认为距离http2的潜力被彻底发掘还有很长一段路要走。

**8.3. http2的实现**

**8.3.1. 缺失的实现**

目前尚未听到Apple官方有让Safari支持HTTP/2的计划。Apache HTTPD和Nginx这两大流行的服务器都提供SPDY的支持，但却没有对提供HTTP/2的支持进行任何表态。

**8.4. 对http2的常见批评**

在制定协议的讨论中有许多充满争议的地方，当然会有不少人认为这样的协议最终会以失败告终。这里我想提一些常见的抱怨和对它们的反驳：

**8.4.1. “这个协议是Google设计制定的”**

似乎有很多因素在暗示着这个世界越来越被Google所控制，但事实并不是这样。这个协议是被IETF制定的，就跟过去30年那些案例一样。我们知道而且承认Google所开发的SPDY不仅仅证明了开发一个新协议的可行性，还充分展现了新协议能带来的好处。

Google公开[声明](http://blog.chromium.org/2015/02/hello-http2-goodbye-spdy-http-is_9.html)了他们会在2016年移除Crhome里对SPDY和NPN的支持，并且极力推动服务器迁移至HTTP/2。

**8.4.2. 这个协议只对浏览器有帮助**

在某种程度上，这是对的。开发http2的一个主要驱动力就是修复HTTP pipelining。如果在你的应用场景里本来就不需要pipelining，那么确实很有可能http2对你没有太大帮助。虽然这并不是唯一的提升，但显然这是非常重要的一个。

一旦当某些服务意识到在一个连接上建立多路复用流的强大威力时，我认为会有越来越多的程序采用http2。

小量的REST APIs和采用HTTP 1.x的简单程序可能不会认为迁移到http2能有多大的优势。但至少http2对绝大部分用户来讲，几乎没有坏处。

**8.4.3. 这个协议只对大型网站有用**

完全不是这样。因为缺乏内容分发网络，小网站的网络延迟往往较高，而多路复用的能力可以极大的改善在高网络延迟下的体验。大型网站往往已经将内容分发到各处，所以速度其实更快。

